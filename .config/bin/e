#!/bin/bash

# this technique modified from https://www.reddit.com/r/emacs/comments/a5uzeb/how_can_emacsclient_create_a_new_frame_when_none/

# find all existing frames

frameslist=`emacsclient --alternate-editor='' --eval '(frame-list)' | egrep -o '(frame)+'`

if [ "$(echo "$frameslist" | sed -n '$=')" -ge 2 ] ;then
    # prevent creating another X frame if there is at least one present.
    # only works when there exists a filename
    emacsclient -alternate-editor="" --no-wait "$@"
else
    # Create one if there is no X window yet.
    emacsclient -alternate-editor="" --create-frame --no-wait "$@"
fi
