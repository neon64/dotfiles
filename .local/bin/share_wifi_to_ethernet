#!/bin/sh

sudo ip link set up dev enp0s31f6
sudo ip addr add 192.168.123.100/24 dev enp0s31f6

sudo sysctl net.ipv4.ip_forward=1

sudo iptables -t nat -A POSTROUTING -o wlp0s20f3 -j MASQUERADE
sudo iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
sudo iptables -A FORWARD -i enp0s31f6 -o wlp0s20f3 -j ACCEPT

echo ""
echo ""
echo "All set up!"
echo "Follow these instructions for your client machine:"
echo ""
echo "$ ip addr add 192.168.123.201/24 dev eth0  # arbitrary address, first three blocks must match the address from above"
echo "$ ip link set up dev eth0"
echo "$ ip route add default via 192.168.123.100 dev eth0   # same address as in the beginning"
